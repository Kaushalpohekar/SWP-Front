"use strict";(self.webpackChunkSWP_Front=self.webpackChunkSWP_Front||[]).push([[706],{3706:(xt,U,c)=>{c.r(U),c.d(U,{AdminUserModule:()=>vt});var _=c(6814),u=c(1896),t=c(5879),h=c(2939),p=c(2296);let b=(()=>{class n{constructor(e){this.snackBarRef=e}confirm(){this.snackBarRef.dismissWithAction()}dismiss(){this.snackBarRef.dismiss()}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.OX))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-confirm-snack-bar"]],decls:6,vars:0,consts:[["mat-button","",1,"yes-button",3,"click"],["mat-button","",1,"no-button",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"Are you sure you want to proceed?"),t.qZA(),t.TgZ(2,"button",0),t.NdJ("click",function(){return i.confirm()}),t._uU(3,"Yes"),t.qZA(),t.TgZ(4,"button",1),t.NdJ("click",function(){return i.dismiss()}),t._uU(5,"No"),t.qZA())},dependencies:[p.lW],styles:["span[_ngcontent-%COMP%]{margin-right:16px}.yes-button[_ngcontent-%COMP%], .no-button[_ngcontent-%COMP%]{color:#f5f5f5}"]})}return n})();var C=c(8677),x=c(5717),q=c(459),g=c(5195),A=c(617);function F(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",15),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewDetails(r))}),t.TgZ(1,"mat-card",16)(2,"mat-card-content")(3,"div",0)(4,"div",6),t._uU(5,"Plant Name :"),t.qZA(),t.TgZ(6,"div",7)(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",9),t._uU(10),t.qZA()(),t.TgZ(11,"div",17)(12,"button",18),t.NdJ("click",function(i){const s=t.CHM(e).$implicit;return t.oxw().updateToggleSidenav(s,"updatePlant"),t.KtG(i.stopPropagation())}),t._uU(13,"Update"),t.qZA(),t.TgZ(14,"button",19),t.NdJ("click",function(i){const s=t.CHM(e).$implicit,m=t.oxw();return i.stopPropagation(),t.KtG(m.deletePlant(s.plant_id))}),t._uU(15,"Delete"),t.qZA()()()()()()}if(2&n){const e=a.$implicit;t.xp6(8),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(null==e?null:e.location)}}let k=(()=>{class n{constructor(e,o,i,r,s){this.snackBar=e,this.service=o,this.router=i,this.sidenavService=r,this.cookieService=s}ngOnInit(){this.organizationData(),this.plantsData(),this.plantChangeSubscription=this.service.plantChange$.subscribe(()=>{this.plantsData()})}ngOnDestroy(){this.plantChangeSubscription&&this.plantChangeSubscription.unsubscribe()}updateToggleSidenav(e,o){this.sidenavService.toggleSidenav(),this.sidenavService.passData({data:e,type:o})}deletePlant(e){const o=this.snackBar.openFromComponent(b,{duration:3e3});o.onAction().subscribe(()=>{this.service.deletePlant(e).subscribe(()=>{this.snackBar.open("Plant Deleted Successfully","Close",{duration:3e3}),this.plantsData()},i=>{this.snackBar.open(`Error while deleting plant:${i.error.error}`,"Close",{duration:3e3}),console.error()})}),o.afterDismissed().subscribe(()=>{this.snackBar.open("Snack bar dismissed","Close",{duration:3e3})})}organizationData(){const e=this.service.retrieveOrganizationId();e?this.service.organizationData(e).subscribe(o=>{this.data=o[0]},o=>{this.snackBar.open(`Error fetching organization data: ${o.error.error}`,"Close",{duration:3e3})}):this.snackBar.open("No organization ID found.","Close",{duration:3e3})}plantsData(){const e=this.service.retrieveOrganizationId();e?this.service.plantsData(e).subscribe(o=>{this.plantData=o},o=>{this.snackBar.open(`Error fetching plants data: ${o.error.error}`,"Close",{duration:3e3})}):this.snackBar.open("No organization ID found.","Close",{duration:3e3})}viewDetails(e){this.router.navigate(["/ad/home/users/"+e.plant_id]),this.cookieService.set("_plant_id",e.plant_id,{path:"/"})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.ux),t.Y36(C.l),t.Y36(u.F0),t.Y36(x.G),t.Y36(q.N))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-user-home"]],decls:24,vars:3,consts:[[1,"container-fluid"],[1,"row","pt-2","mb-2"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"outer-card"],[1,"mt-2"],[1,"Linear-Approved"],[1,"card-title"],[1,"card-flex"],[1,"card-subtitle","pt-2"],[1,"card-subtitle2","pt-2"],[1,"outer-card","card-flex","mt-2"],[1,"mt-3"],["mat-icon-button","",1,"mt-2",3,"click"],[1,"row"],["class","col-xl-3 col-lg-3 col-md-4 col-sm-12 mt-2",3,"click",4,"ngFor","ngForOf"],[1,"col-xl-3","col-lg-3","col-md-4","col-sm-12","mt-2",3,"click"],[1,"Approved"],[1,"mt-1","update-flex"],["mat-button","",2,"color","#135c18",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5,"Hello, User Name"),t.qZA()(),t.TgZ(6,"mat-card",5)(7,"mat-card-content")(8,"div",0)(9,"div",6),t._uU(10,"Organization Name :"),t.qZA(),t.TgZ(11,"div",7)(12,"div",8),t._uU(13),t.qZA(),t.TgZ(14,"div",9),t._uU(15),t.qZA()()()()(),t.TgZ(16,"div",10)(17,"h2",11),t._uU(18,"Plants"),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){return i.updateToggleSidenav(i.data,"insertPlant")}),t.TgZ(20,"mat-icon"),t._uU(21,"add"),t.qZA()()(),t.TgZ(22,"div",13),t.YNc(23,F,16,2,"div",14),t.qZA()()()()),2&o&&(t.xp6(13),t.Oqu(null==i.data?null:i.data.name),t.xp6(2),t.Oqu(null==i.data?null:i.data.address),t.xp6(8),t.Q6J("ngForOf",i.plantData))},dependencies:[_.sg,p.lW,p.RK,g.a8,g.dn,A.Hw],styles:[".title[_ngcontent-%COMP%]{font-size:1rem;font-weight:550}.outer-card[_ngcontent-%COMP%]{width:100%}.inner-card[_ngcontent-%COMP%]{height:50px;width:50px;display:flex;justify-content:center;align-items:center}.update-flex[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:-.75vh}.card-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:550}.card-subtitle[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:550;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-subtitle2[_ngcontent-%COMP%]{font-size:.9rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.icon-color[_ngcontent-%COMP%]{background:linear-gradient(to right,blue,green);-webkit-text-fill-color:transparent}.Approved[_ngcontent-%COMP%], .Linear-Approved[_ngcontent-%COMP%]{border-left:5px solid;border-image:linear-gradient(to bottom,#1b8f29,#135c18);border-image-slice:1}"]})}return n})();var d=c(5313),w=c(1476);function S(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.departmentsSelect(r))}),t.TgZ(2,"div",17)(3,"div",5)(4,"div",18)(5,"div",19),t._uU(6),t.qZA()(),t.TgZ(7,"div",18)(8,"div",20),t._uU(9),t.qZA()(),t.TgZ(10,"div",21)(11,"button",22),t.NdJ("click",function(i){const s=t.CHM(e).$implicit,m=t.oxw();return i.stopPropagation(),t.KtG(m.viewForms(s))}),t._uU(12,"Forms"),t.qZA(),t.TgZ(13,"button",23),t.NdJ("click",function(i){const s=t.CHM(e).$implicit,m=t.oxw();return i.stopPropagation(),t.KtG(m.updateToggleSidenav(s,"editDepartment"))}),t._uU(14,"Update"),t.qZA(),t.TgZ(15,"button",24),t.NdJ("click",function(i){const s=t.CHM(e).$implicit,m=t.oxw();return i.stopPropagation(),t.KtG(m.deleteDepartment(s.department_id))}),t._uU(16,"Delete"),t.qZA()()()()()()}if(2&n){const e=a.$implicit;t.xp6(6),t.Oqu(null==e?null:e.name),t.xp6(3),t.Oqu(null==e?null:e.total_users)}}function O(n,a){1&n&&(t.TgZ(0,"th",35),t._uU(1," Name "),t.qZA())}function N(n,a){if(1&n&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.first_name+" "+e.last_name," ")}}function D(n,a){1&n&&(t.TgZ(0,"th",35),t._uU(1," User Name "),t.qZA())}function M(n,a){if(1&n&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.username," ")}}function Q(n,a){1&n&&(t.TgZ(0,"th",35),t._uU(1," Role "),t.qZA())}function P(n,a){if(1&n&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.role_name," ")}}function G(n,a){1&n&&(t.TgZ(0,"th",35),t._uU(1," Contact No. "),t.qZA())}function Y(n,a){if(1&n&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.contact_no," ")}}function B(n,a){1&n&&(t.TgZ(0,"th",35),t._uU(1," Action "),t.qZA())}function J(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",36)(1,"button",37),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.updateToggleSidenav(r,"editUser"))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",37),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.deleteUser(r.user_id))}),t.TgZ(5,"mat-icon",38),t._uU(6,"delete"),t.qZA()()()}}function I(n,a){1&n&&t._UZ(0,"tr",39)}function z(n,a){1&n&&t._UZ(0,"tr",40)}function H(n,a){if(1&n&&(t.TgZ(0,"table",25),t.ynx(1,26),t.YNc(2,O,2,0,"th",27),t.YNc(3,N,2,1,"td",28),t.BQk(),t.ynx(4,29),t.YNc(5,D,2,0,"th",27),t.YNc(6,M,2,1,"td",28),t.BQk(),t.ynx(7,30),t.YNc(8,Q,2,0,"th",27),t.YNc(9,P,2,1,"td",28),t.BQk(),t.ynx(10,31),t.YNc(11,G,2,0,"th",27),t.YNc(12,Y,2,1,"td",28),t.BQk(),t.ynx(13,32),t.YNc(14,B,2,0,"th",27),t.YNc(15,J,7,0,"td",28),t.BQk(),t.YNc(16,I,1,0,"tr",33),t.YNc(17,z,1,0,"tr",34),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function $(n,a){if(1&n&&(t.TgZ(0,"div",41),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.noDataMsg)}}let j=(()=>{class n{constructor(e,o,i,r,s){this.snackBar=e,this.route=o,this.router=i,this.dataService=r,this.sidenavService=s,this.selectedDep="",this.displayedColumns=["name","username","role","contact","action"],this.dataSource=new d.by}ngOnInit(){this.departmentsData(),this.departmentsSelect(""),this.subscription=this.dataService.departmentChange$.subscribe(()=>{this.departmentsData(),""!=this.selectedDep&&this.departmentsSelect(this.selectedDep)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}deleteUser(e){const o=this.snackBar.openFromComponent(b,{duration:3e3});o.onAction().subscribe(()=>{this.dataService.deleteUser(e).subscribe(()=>{this.snackBar.open("User Deleted Successfully","Close",{duration:3e3}),this.departmentsSelect(this.selectedDep)},i=>{this.snackBar.open(`Error while deleting plant: ${i.error.error}`,"Close",{duration:3e3})})}),o.afterDismissed().subscribe(()=>{this.snackBar.open("Snack bar dismissed","Close",{duration:3e3})})}deleteDepartment(e){const o=this.snackBar.openFromComponent(b,{duration:3e3});o.onAction().subscribe(()=>{this.dataService.deleteDepartment(e).subscribe(()=>{this.snackBar.open("Department Deleted Successfully","Close",{duration:3e3}),this.departmentsData()},i=>{this.snackBar.open(`Error while deleting Department: ${i.error.error}`,"Close",{duration:3e3})})}),o.afterDismissed().subscribe(()=>{this.snackBar.open("Snack bar dismissed","Close",{duration:3e3})})}updateToggleSidenav(e,o){this.sidenavService.toggleSidenav(),this.sidenavService.passData({data:e,type:o})}departmentsData(){this.id=this.route.snapshot.paramMap.get("id")??"",this.id?this.dataService.departmentsData(this.id).subscribe(e=>{this.data=e},e=>{this.snackBar.open(`Error fetching departments data: ${e.error.error}`,"Close",{duration:3e3})}):this.snackBar.open("No Plant ID found.","Close",{duration:3e3})}departmentsSelect(e){this.selectedDep=e,e?this.dataService.usersDataByDepartments(e.department_id).subscribe(o=>{this.dataSource=new d.by(o),this.dataSource.paginator=this.paginator},o=>{this.noDataMsg=o.error.error}):this.noDataMsg="Department Not Selected."}viewForms(e){const o=this.route.snapshot.paramMap.get("id");this.router.navigate(["/ad/home/users/"+o+"/forms/"+e.department_id])}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.ux),t.Y36(u.gz),t.Y36(u.F0),t.Y36(C.l),t.Y36(x.G))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-user"]],viewQuery:function(o,i){if(1&o&&t.Gf(w.NW,7),2&o){let r;t.iGM(r=t.CRH())&&(i.paginator=r.first)}},decls:24,vars:4,consts:[[1,"container-fluid"],[1,"row","pt-2","mb-2"],[1,"outer-card","card-flex"],[1,"mt-2"],["mat-icon-button","",3,"click"],[1,"row"],["class","col-lg-2 col-md-4 col-sm-12 mb-3",4,"ngFor","ngForOf"],[2,"border-radius","5px"],[1,"outer-card","card-flex","mt-2"],[1,"mt-2",2,"margin-left","10px"],["mat-icon-button","",2,"margin-right","10px",3,"click"],[1,"table-container",2,"overflow","auto","max-height","50vh","border-radius","5px"],["mat-table","",3,"dataSource",4,"ngIf","ngIfElse"],["noData",""],["showFirstLastButtons","",1,"mb-3",3,"pageSize"],[1,"col-lg-2","col-md-4","col-sm-12","mb-3"],[1,"card","count-card","Approved",3,"click"],[1,"card-body"],[1,"col-12"],[1,"card-title"],[1,"text-end","count"],[1,"mt-2","update-flex"],["mat-button","","color","primary",2,"margin-right","-5px",3,"click"],["mat-button","",2,"color","#135c18","margin-right","-5px",3,"click"],["mat-button","","color","warn",2,"margin-right","-5px",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["matColumnDef","role"],["matColumnDef","contact"],["matColumnDef","action"],["class","table-header","mat-header-row","","style","z-index: 1;",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","table-body","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","dark",2,"white-space","nowrap",3,"click"],[2,"margin-right","5px"],["mat-header-row","",1,"table-header",2,"z-index","1"],["mat-row","",1,"table-body"],[1,"no-data-msg"]],template:function(o,i){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Departments"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return i.updateToggleSidenav(i.id,"addDepartment")}),t.TgZ(6,"mat-icon"),t._uU(7,"add"),t.qZA()()(),t.TgZ(8,"div",5),t.YNc(9,S,17,2,"div",6),t.qZA(),t.TgZ(10,"div")(11,"mat-card",7)(12,"div",8)(13,"h2",9),t._uU(14,"Users"),t.qZA(),t.TgZ(15,"button",10),t.NdJ("click",function(){return i.updateToggleSidenav("","addUser")}),t.TgZ(16,"mat-icon"),t._uU(17,"add"),t.qZA()()(),t.TgZ(18,"div",0)(19,"div",11),t.YNc(20,H,18,4,"table",12),t.YNc(21,$,2,1,"ng-template",null,13,t.W1O),t.qZA(),t._UZ(23,"mat-paginator",14),t.qZA()()()()()),2&o){const r=t.MAs(22);t.xp6(9),t.Q6J("ngForOf",i.data),t.xp6(11),t.Q6J("ngIf",i.dataSource.data.length>0)("ngIfElse",r),t.xp6(3),t.Q6J("pageSize",10)}},dependencies:[_.sg,_.O5,p.lW,p.RK,g.a8,A.Hw,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,w.NW],styles:[".title[_ngcontent-%COMP%]{font-size:1rem;font-weight:550}.card-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.count-card[_ngcontent-%COMP%]{border:none;border-radius:5px}.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:550}.count-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:550;display:flex;align-items:center;justify-content:space-between}.count-card[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{padding-top:5px;font-size:1.3rem;font-weight:600}.Approved[_ngcontent-%COMP%]{border-left:5px solid;border-image:linear-gradient(to bottom,#1b8f29,#135c18);border-image-slice:1}.update-flex[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:-.75vh;flex-wrap:wrap}.no-data-msg[_ngcontent-%COMP%]{display:flex;justify-content:center;font-weight:550}.table-container[_ngcontent-%COMP%]{table-layout:fixed}.table-header[_ngcontent-%COMP%]{position:sticky;top:0;background:linear-gradient(180deg,#00a366 0%,#047d4b 100%);color:#f5f5f5;height:45px;font-size:.9rem;font-weight:550}.table-body[_ngcontent-%COMP%]{height:40px;font-size:.7rem;font-weight:550}"]})}return n})();var l=c(6223),R=c(8097),K=c(2032),v=c(9157),E=c(8525),V=c(3680),f=c(1545);function W(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"mat-card",10),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.CategorySelect(r))}),t.TgZ(2,"mat-card-content")(3,"div",0)(4,"div",11)(5,"div",12)(6,"div",13),t._uU(7),t.qZA(),t.TgZ(8,"div",14),t._uU(9),t.qZA(),t.TgZ(10,"div",15),t._uU(11),t.qZA()(),t.TgZ(12,"div",16)(13,"mat-card",17)(14,"mat-card-content")(15,"i",18),t._uU(16),t.qZA()()()()()()()()()}if(2&n){const e=a.$implicit;t.xp6(7),t.Oqu(e.name),t.xp6(2),t.hij("Type: ",e.form_type,""),t.xp6(2),t.Oqu(e.subtitle),t.xp6(5),t.Oqu(e.icon)}}function L(n,a){1&n&&t._uU(0,"Form Details")}function X(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Form Name is Required"),t.qZA())}function tt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Number of Questions should be greater than 0."),t.qZA())}function et(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Form Description is Required"),t.qZA())}function nt(n,a){1&n&&t._uU(0,"Questions")}function ot(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw().index;t.xp6(1),t.hij(" Question ",e+1," is Required ")}}function it(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Question Type is Required. "),t.qZA())}function rt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Options are Required "),t.qZA())}const Z=function(n){return["questionsArray",n,"Option"]};function at(n,a){if(1&n&&(t.TgZ(0,"div",35)(1,"mat-form-field",29)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",61),t.TgZ(5,"mat-icon",31),t._uU(6,"view_list"),t.qZA(),t.YNc(7,rt,2,0,"mat-error",32),t.qZA()()),2&n){const e=t.oxw().index,o=t.oxw(2);let i;t.xp6(3),t.hij("Options for Question ",e+1,""),t.xp6(4),t.Q6J("ngIf",(null==(i=o.secondFormGroup.get(t.VKq(2,Z,e)))?null:i.invalid)&&((null==(i=o.secondFormGroup.get(t.VKq(4,Z,e)))?null:i.dirty)||(null==(i=o.secondFormGroup.get(t.VKq(6,Z,e)))?null:i.touched)))}}const T=function(n){return["questionsArray",n,"Question"]},y=function(n){return["questionsArray",n,"QuestionType"]};function st(n,a){if(1&n&&(t.TgZ(0,"div",50)(1,"div",51)(2,"mat-form-field",29)(3,"mat-label"),t._uU(4),t.qZA(),t._UZ(5,"input",52),t.TgZ(6,"mat-icon",31),t._uU(7,"question_answer"),t.qZA(),t.YNc(8,ot,2,1,"mat-error",32),t.qZA()(),t.TgZ(9,"div",33)(10,"mat-form-field",29)(11,"mat-label"),t._uU(12),t.qZA(),t.TgZ(13,"mat-select",53)(14,"mat-option",54),t._uU(15,"Multiple Choice"),t.qZA(),t.TgZ(16,"mat-option",55),t._uU(17,"Long Answer"),t.qZA(),t.TgZ(18,"mat-option",56),t._uU(19,"Select Answer"),t.qZA(),t.TgZ(20,"mat-option",57),t._uU(21,"Short Answer"),t.qZA(),t.TgZ(22,"mat-option",58),t._uU(23,"Check Box"),t.qZA(),t.TgZ(24,"mat-option",59),t._uU(25,"Upload"),t.qZA()(),t.TgZ(26,"mat-icon",31),t._uU(27,"view_headline"),t.qZA(),t.YNc(28,it,2,0,"mat-error",32),t.qZA()(),t.YNc(29,at,8,8,"div",60),t.qZA()),2&n){const e=a.index,o=t.oxw(2);let i,r;t.Q6J("formGroupName",e),t.xp6(4),t.hij("Question ",e+1,""),t.xp6(1),t.MGl("placeholder","Question ",e+1,""),t.xp6(3),t.Q6J("ngIf",(null==(i=o.secondFormGroup.get(t.VKq(7,T,e)))?null:i.invalid)&&((null==(i=o.secondFormGroup.get(t.VKq(9,T,e)))?null:i.dirty)||(null==(i=o.secondFormGroup.get(t.VKq(11,T,e)))?null:i.touched))),t.xp6(4),t.hij("Type of Question ",e+1,""),t.xp6(16),t.Q6J("ngIf",(null==(r=o.secondFormGroup.get(t.VKq(13,y,e)))?null:r.invalid)&&((null==(r=o.secondFormGroup.get(t.VKq(15,y,e)))?null:r.dirty)||(null==(r=o.secondFormGroup.get(t.VKq(17,y,e)))?null:r.touched))),t.xp6(1),t.Q6J("ngIf","multiple"===o.getQuestionType(e)||"select"===o.getQuestionType(e)||"radio"===o.getQuestionType(e))}}function ct(n,a){1&n&&t._uU(0,"Submit")}function lt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",66),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.setActiveCard(r))}),t.TgZ(1,"div",67)(2,"p",68),t._uU(3),t.qZA()(),t.TgZ(4,"h5",68),t._uU(5),t.qZA()()}if(2&n){const e=a.$implicit,o=t.oxw(3);t.ekj("active",o.isActive(e)),t.xp6(3),t.Oqu(e.form_name),t.xp6(2),t.Oqu(e.form_description)}}function dt(n,a){if(1&n&&(t.TgZ(0,"div",62)(1,"h2",63),t._uU(2,"Previous Forms"),t.qZA(),t.TgZ(3,"div",64),t.YNc(4,lt,6,4,"a",65),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.dataSource)}}function mt(n,a){1&n&&(t.TgZ(0,"div",69),t._uU(1," No data available for Selected Category! "),t.qZA())}function ut(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",19)(1,"div",20)(2,"div",21)(3,"h2",22),t._uU(4,"Forms"),t.qZA(),t.TgZ(5,"mat-horizontal-stepper",23,24)(7,"mat-step",25)(8,"form",26),t.YNc(9,L,1,0,"ng-template",27),t.TgZ(10,"div",28)(11,"mat-form-field",29)(12,"mat-label"),t._uU(13,"Form Name"),t.qZA(),t._UZ(14,"input",30),t.TgZ(15,"mat-icon",31),t._uU(16,"question_answer"),t.qZA(),t.YNc(17,X,2,0,"mat-error",32),t.qZA()(),t.TgZ(18,"div",33)(19,"mat-form-field",29)(20,"mat-label"),t._uU(21,"Number of Question"),t.qZA(),t._UZ(22,"input",34),t.TgZ(23,"mat-icon",31),t._uU(24,"format_list_numbered_rtl"),t.qZA(),t.YNc(25,tt,2,0,"mat-error",32),t.qZA()(),t.TgZ(26,"div",35)(27,"mat-form-field",29)(28,"mat-label"),t._uU(29,"Form Description"),t.qZA(),t._UZ(30,"textarea",36),t.TgZ(31,"mat-icon",31),t._uU(32,"format_line_spacing"),t.qZA(),t.YNc(33,et,2,0,"mat-error",32),t.qZA()(),t.TgZ(34,"div",37)(35,"button",38)(36,"mat-icon"),t._uU(37,"navigate_next"),t.qZA()()()()(),t.TgZ(38,"mat-step",25)(39,"form",39),t.YNc(40,nt,1,0,"ng-template",27),t.TgZ(41,"div",40),t.YNc(42,st,30,19,"div",41),t.qZA(),t.TgZ(43,"div",42)(44,"button",43)(45,"mat-icon"),t._uU(46,"navigate_before"),t.qZA()(),t.TgZ(47,"button",44)(48,"mat-icon"),t._uU(49,"navigate_next"),t.qZA()()()()(),t.TgZ(50,"mat-step"),t.YNc(51,ct,1,0,"ng-template",27),t._uU(52," You are all Set. "),t.TgZ(53,"div")(54,"div",42)(55,"button",43)(56,"mat-icon"),t._uU(57,"navigate_before"),t.qZA()(),t.TgZ(58,"button",45),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.Submit())}),t._uU(59," Submit "),t.qZA()()()()()(),t.TgZ(60,"div",46),t.YNc(61,dt,5,1,"div",47),t.YNc(62,mt,2,0,"ng-template",48,49,t.W1O),t.qZA()()()}if(2&n){const e=t.MAs(63),o=t.oxw();let i,r,s;t.xp6(5),t.Q6J("linear",!0),t.xp6(2),t.Q6J("stepControl",o.firstFormGroup),t.xp6(1),t.Q6J("formGroup",o.firstFormGroup),t.xp6(9),t.Q6J("ngIf",(null==(i=o.firstFormGroup.get("FormName"))?null:i.invalid)&&((null==(i=o.firstFormGroup.get("FormName"))?null:i.dirty)||(null==(i=o.firstFormGroup.get("FormName"))?null:i.touched))),t.xp6(8),t.Q6J("ngIf",(null==(r=o.firstFormGroup.get("Questions"))?null:r.invalid)&&((null==(r=o.firstFormGroup.get("Questions"))?null:r.dirty)||(null==(r=o.firstFormGroup.get("Questions"))?null:r.touched))),t.xp6(8),t.Q6J("ngIf",(null==(s=o.firstFormGroup.get("FormDescription"))?null:s.invalid)&&((null==(s=o.firstFormGroup.get("FormDescription"))?null:s.dirty)||(null==(s=o.firstFormGroup.get("FormDescription"))?null:s.touched))),t.xp6(5),t.Q6J("stepControl",o.secondFormGroup),t.xp6(1),t.Q6J("formGroup",o.secondFormGroup),t.xp6(3),t.Q6J("ngForOf",o.questionsArray),t.xp6(19),t.Q6J("ngIf",o.dataSource.length>0)("ngIfElse",e)}}function pt(n,a){1&n&&(t.TgZ(0,"div",70)(1,"div",71),t._uU(2," Category Not Selected! "),t.qZA()())}const _t=[{path:"home",component:k,data:{breadcrumb:"Home"}},{path:"home/users/:id",component:j,data:{breadcrumb:"Users"}},{path:"home/users/:id/forms/:dep_id",component:(()=>{class n{constructor(e,o,i,r,s,m,bt,Ct){this.snackBar=e,this._formBuilder=o,this.router=i,this.route=r,this.dataService=s,this.sidenavService=m,this.cookieService=bt,this.EncryptService=Ct,this.isLinear=!0,this.id="",this.numberOfQuestions=0,this.requireOptions=[],this.dataSource=[],this.categorySelected=!1,this.activeCard=null}ngOnInit(){this.forms(),this.categoriesData(),this.subscription=this.dataService.categoryChange$.subscribe(()=>{this.categoriesData()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateToggleSidenav(e,o){this.sidenavService.toggleSidenav(),this.sidenavService.passData({data:e,type:o})}categoriesData(){this.id=this.route.snapshot.paramMap.get("dep_id")??"",this.id?this.dataService.categoriesData(this.id).subscribe(e=>{this.data=e},e=>{this.snackBar.open(`Error fetching departments data: ${e.error.error}`,"Close",{duration:3e3})}):this.snackBar.open("No Plant ID found.","Close",{duration:3e3})}CategorySelect(e){this.selectedCategory=e,this.dataSource=[],e?(this.categorySelected=!0,this.dataService.prevForms(e.category_id).subscribe(o=>{this.dataSource=o},o=>{this.snackBar.open(o.error.error,"Close",{duration:3e3})})):this.categorySelected=!1}forms(){this.firstFormGroup=this._formBuilder.group({FormName:["",l.kI.required],FormDescription:["",l.kI.required],Questions:["",[l.kI.required,l.kI.min(1)]]}),this.secondFormGroup=this._formBuilder.group({questionsArray:this._formBuilder.array([])}),this.firstFormGroup.get("Questions")?.valueChanges.subscribe(e=>{this.numberOfQuestions=e,this.requireOptions=new Array(this.numberOfQuestions).fill(!0),this.updateQuestionsArray()})}updateQuestionsArray(){const e=this.secondFormGroup.get("questionsArray");e.clear();for(let o=0;o<this.numberOfQuestions;o++)e.push(this._formBuilder.group({Question:["",l.kI.required],QuestionType:["",l.kI.required],Option:[""]}))}get questionsArray(){return this.secondFormGroup.get("questionsArray").controls}getQuestionType(e){return this.secondFormGroup.get(["questionsArray",e,"QuestionType"])?.value}setRequireOptions(e,o){this.requireOptions[e]=o}areOptionsRequired(e){return this.requireOptions[e]}Submit(){const e=this.secondFormGroup.get("questionsArray")?.value,o=this.cookieService.get("_user_id"),i={form_name:this.firstFormGroup.get("FormName")?.value,form_description:this.firstFormGroup.get("FormDescription")?.value,created_by:this.EncryptService.decryptData(o),category_id:this.selectedCategory.category_id,plant_id:this.route.snapshot.paramMap.get("id"),Questions:e};this.firstFormGroup.valid&&this.secondFormGroup.valid?this.dataService.addForm(i).subscribe(r=>{this.snackBar.open(`Form created Successfully, Id: ${r}`,"Close",{duration:3e3}),console.log("",r)},r=>{this.snackBar.open(`Error creating form: ${r.error.error}`,"Close",{duration:3e3}),console.error("",r)}):(this.firstFormGroup.markAllAsTouched(),this.secondFormGroup.markAllAsTouched())}setActiveCard(e){this.activeCard=e}isActive(e){return this.activeCard===e}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.ux),t.Y36(l.qu),t.Y36(u.F0),t.Y36(u.gz),t.Y36(C.l),t.Y36(x.G),t.Y36(q.N),t.Y36(R.U))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-forms"]],decls:13,vars:3,consts:[[1,"container-fluid"],[1,"row","pt-2","mb-2"],[1,"outer-card","card-flex"],[1,"mt-2"],["mat-icon-button","",3,"click"],[1,"row",2,"padding-right","0"],["class","col-xl-2 col-lg-3 col-md-4 col-sm-12 mb-3",4,"ngFor","ngForOf"],["style","border-radius: 5px;",4,"ngIf"],["class","pt-2 mb-3",4,"ngIf"],[1,"col-xl-2","col-lg-3","col-md-4","col-sm-12","mb-3"],[1,"outer-card",3,"click"],[1,"row"],[1,"col-8"],[1,"card-title"],[1,"card-subtitle"],[1,"card-subtitle2"],[1,"col-4"],[1,"inner-card"],[1,"material-icons","icon-color"],[2,"border-radius","5px"],[1,"row","container-fluid"],[1,"col-12","col-md-10","col-lg-9"],[1,"mt-2",2,"margin-left","10px"],[3,"linear"],["stepper","matHorizontalStepper"],[3,"stepControl"],[1,"mt-2","row",3,"formGroup"],["matStepLabel",""],[1,"col-md-8","col-12"],["appearance","outline",1,"from-feild"],["matInput","","placeholder","Form Name","formControlName","FormName"],["matSuffix",""],[4,"ngIf"],[1,"col-md-4","col-12"],["type","number","min","1","matInput","","placeholder","Number of Questions","formControlName","Questions"],[1,"col-12"],["matInput","","placeholder","Form Description","formControlName","FormDescription"],[2,"display","flex","justify-content","end"],["mat-icon-button","","matStepperNext",""],[3,"formGroup"],["formArrayName","questionsArray",2,"max-height","45vh","overflow-y","auto","overflow-x","hidden"],["class","row mt-2",3,"formGroupName",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-between"],["mat-button","","matStepperPrevious",""],["mat-button","","matStepperNext",""],["mat-raised-button","",2,"background-color","#017048","color","whitesmoke",3,"click"],[1,"col-12","col-md-2","col-lg-3"],["class","mt-2 mb-2",4,"ngIf","ngIfElse"],["class","mt-2 mb-3"],["noData",""],[1,"row","mt-2",3,"formGroupName"],[1,"col-12","col-md-8"],["matInput","","formControlName","Question",3,"placeholder"],["placeholder","Question Type","formControlName","QuestionType"],["value","multipleChoice"],["value","longAnswer"],["value","selectAnswer"],["value","shortAnswer"],["value","checkbox"],["value","upload"],["class","col-12",4,"ngIf"],["matInput","","placeholder","Write options for multiple choice separated by Comma.","formControlName","Option"],[1,"mt-2","mb-2"],[1,"mt-1","mb-1",2,"margin-left","10px"],[1,"list-group","card-height"],["class","list-group-item list-group-item-action",3,"active","click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"],[1,"mt-3","alert","alert-warning","text-center"],[1,"pt-2","mb-3"],[1,"alert","alert-warning","text-center"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Categories"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return i.updateToggleSidenav(i.id,"addCategory")}),t.TgZ(6,"mat-icon"),t._uU(7,"add"),t.qZA()()(),t.TgZ(8,"div",5),t.YNc(9,W,17,4,"div",6),t.qZA(),t.TgZ(10,"div"),t.YNc(11,ut,64,11,"mat-card",7),t.YNc(12,pt,3,0,"div",8),t.qZA()()()),2&o&&(t.xp6(9),t.Q6J("ngForOf",i.data),t.xp6(2),t.Q6J("ngIf",i.categorySelected),t.xp6(1),t.Q6J("ngIf",!i.categorySelected))},dependencies:[_.sg,_.O5,p.lW,p.RK,g.a8,g.dn,A.Hw,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.qQ,l.sg,l.u,l.x0,l.CE,K.Nt,v.KE,v.hX,v.TO,v.R9,E.gD,V.ey,f.C0,f.VY,f.Vq,f.Ic,f.fd],styles:[".title[_ngcontent-%COMP%]{font-size:1rem;font-weight:550}.card-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.outer-card[_ngcontent-%COMP%]{height:100%;width:100%}.count-card[_ngcontent-%COMP%]{border:none;border-radius:5px}.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:550}.count-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:550;display:flex;align-items:center;justify-content:space-between}.inner-card[_ngcontent-%COMP%]{height:50px;margin-top:-25px;width:50px;display:flex;justify-content:center;align-items:center}.card-subtitle[_ngcontent-%COMP%]{font-size:.9rem;font-weight:550;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.from-feild[_ngcontent-%COMP%]{width:100%}.card-subtitle2[_ngcontent-%COMP%]{font-size:.8rem;font-weight:350;color:#878787e6;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.icon-color[_ngcontent-%COMP%]{background:linear-gradient(to right,#008554,#035539);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:_ngcontent-%COMP%_pulse 2.5s infinite alternate}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}to{opacity:.5}}.card-height[_ngcontent-%COMP%]{max-height:52vh;overflow:auto}.no-data-msg[_ngcontent-%COMP%]{display:flex;justify-content:center;font-weight:550}.active[_ngcontent-%COMP%]{background-color:#008554;border-color:#035539}"]})}return n})(),data:{breadcrumb:"Forms"}},{path:"**",redirectTo:"home",pathMatch:"full"}];let gt=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(_t),u.Bz]})}return n})();var ft=c(9427),ht=c(632);let vt=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[_.ez,gt,ft.q,ht.l]})}return n})()}}]);